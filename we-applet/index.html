<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <meta name="Description" content="Files we-applet" />
    <link href="../node_modules/@shoelace-style/shoelace/dist/themes/light.css" rel="stylesheet"/>
    <base href="/" />
    <title>Files we-applet</title>
  </head>

  <body>

<!--  <file-share-app></file-share-app>-->
<!--  <script type="module">-->
<!--    console.log("file-share-applet START");-->
<!--    -->
<!--    //console.log("   HC_PORT:", process.env.HC_PORT);-->
<!--    //console.log("ADMIN_PORT:", process.env.ADMIN_PORT);-->
<!--    import filesAPI from "./";-->
<!--    import { setBasePath, getBasePath } from '@shoelace-style/shoelace/dist/utilities/base-path.js';-->
<!--    setBasePath('../node_modules/@shoelace-style/shoelace/dist');-->
<!--    console.log("shoelace basePath", getBasePath());-->
<!--  </script>-->

    <script type="module">

      console.log("file-share-applet START");

      //import '@shoelace-style/shoelace/dist/themes/light.css';

      import { WeClient } from "@lightningrodlabs/we-applet";
      console.log("Imported WeClient");

      import filesAPI from "./out-tsc";
      console.log("Imported filesAPI");
      console.log("appletServices", filesAPI.appletServices);

      import { setBasePath, getBasePath } from '@shoelace-style/shoelace/dist/utilities/base-path.js';
      setBasePath('./');
      console.log("shoelace basePath", getBasePath());


      (async function() {

        console.log("WeClient.connect()...");
        const weClient = await WeClient.connect(filesAPI.appletServices);
        console.log("weClient", weClient);

        const applet = await filesAPI.createFileShareApplet(
                weClient.renderInfo.appletClient,
                weClient.appletHash,
                weClient.renderInfo.profilesClient,
                weClient,
        );
        console.log("applet", applet);
        document.body.append(applet);
      })();

    </script>
  </body>
</html>
